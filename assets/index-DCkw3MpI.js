import{d as e,r as t,n as l,o as a,a as o,c as n,b as u,F as r,e as s,f as i,s as v,t as h}from"./index-DdQUr8T3.js";const d=u("div",{class:"water-fall-loading"}," loading... ",-1),c=e({__name:"index",setup(e){t(null);const c=l([]),f=t(0),g=t(0),m=t(0),p=t(0),x=t([]);a((()=>{addEventListener("resize",y),b(),T(),w()}));const w=()=>{let e=document.querySelector(".water-fall-loading");new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&setTimeout((()=>{T()}),2e3)}))})).observe(e)},b=()=>{f.value=document.documentElement.clientWidth||document.body.clientWidth,p.value=Math.floor(f.value/230),g.value=Math.floor(f.value/p.value),x.value=Array.from({length:p.value},(()=>0))},y=((e,t)=>{let l=null;return function(...a){l&&clearTimeout(l),l=setTimeout((()=>{e(...a)}),t)}})((()=>{b();for(let e=0;e<c.length;e++){let t=M(),l=x.value[t]+"px";c[e].top=l,c[e].left=t*g.value+"px",x.value[t]+=c[e].height}E()}),30),M=()=>{let e=0,t=x.value[0];for(let l=0;l<x.value.length;l++)x.value[l]<t&&(t=x.value[l],e=l);return e},E=()=>{let e=0,t=x.value[0];for(let l=0;l<x.value.length;l++)x.value[l]>t&&(t=x.value[l],e=l);return m.value=t+20,e};function $(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}const T=()=>{for(let e=0;e<15;e++){let t=M(),l=x.value[t]+"px",a={id:e,content:`内容${e}`,with:g,top:l,left:t*g.value+"px",height:Math.floor(100*Math.random())+250,bg:$()};x.value[t]+=a.height,c.push(a)}E()};return(e,t)=>(o(),n("div",null,[u("div",{class:"water-fall",style:v({height:`${i(m)}px`})},[(o(!0),n(r,null,s(i(c),((e,t)=>(o(),n("div",{class:"water-fall-item",key:t,style:v({width:`${e.with}px`,height:`${e.height}px`,backgroundColor:e.bg,top:e.top,left:e.left})},h(e.content),5)))),128))],4),d]))}});export{c as default};
