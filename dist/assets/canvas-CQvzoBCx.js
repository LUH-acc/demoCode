import{d as e,r as a,o as t,a as l,c as n,b as s,f as u,F as v}from"./index-DdQUr8T3.js";const i={class:"chat-canvas"},c=["src"],o=["src"],r=e({__name:"canvas",setup(e){const r=a(""),d=a(null),h=a(null),m=a("");t((()=>{L()}));let g=0,f=0,w=0,p=0;const L=()=>{h.value.onload=()=>{var e,a;g=null==(e=h.value)?void 0:e.naturalWidth,f=null==(a=h.value)?void 0:a.naturalHeight,d.value.width=h.value.width,d.value.height=h.value.height,w=g/h.value.width,p=f/h.value.height},d.value.addEventListener("mousedown",_,!1)};let E=0,R=0,x=0,y=0;const _=e=>{E=e.clientX,R=e.clientY,d.value.addEventListener("mousemove",k,!1),d.value.addEventListener("mouseup",C,!1)},k=e=>{x=e.clientX-E,y=e.clientY-R;let a=d.value.getContext("2d");a.clearRect(0,0,d.value.width,d.value.height),a.fillStyle="#000",a.strokeRect(E,R,x,y)},C=()=>{d.value.removeEventListener("mousemove",k,!1),d.value.removeEventListener("mouseup",C,!1),b()},b=()=>{const e=document.createElement("canvas");e.width=300,e.height=300;const a=e.getContext("2d");a.clearRect(0,0,300,300),a.drawImage(h.value,E*w,R*p,x*w,y*p,0,0,300,300),m.value=e.toDataURL()},D=e=>{const a=new FileReader;a.readAsDataURL(e.target.files[0]),a.onload=e=>{r.value=e.target.result}};return(e,a)=>(l(),n(v,null,[s("div",i,[s("canvas",{class:"chat-canvas-box",ref_key:"canvas",ref:d},null,512),s("img",{src:u(r),alt:"",ref_key:"img",ref:h,class:"img"},null,8,c)]),s("div",null,[s("input",{type:"file",onChange:D},null,32)]),s("div",null,[s("img",{class:"img2",src:u(m),alt:""},null,8,o)])],64))}});export{r as default};
