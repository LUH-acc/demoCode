import{d as e,r as a,o as l,D as t,a as u,c as v,b as s,t as n,f as c,F as r,e as o,m as d,E as i,y as D}from"./index-DdQUr8T3.js";const f={class:"calendar-container"},y={class:"calendar"},g={class:"calendar-header"},h={class:"calendar-header-left"},w={class:"calendar-body"},m={class:"week-name"},k={class:"date-name"},C=["onClick"],p=e({__name:"index",setup(e){const p=["日","一","二","三","四","五","六"],M=a(0),b=a(0),T=a([]),x=a([]),A=a([]),F=a([]),L=a(!1),S=a(0),Y=a(0),_=a(0),j=a(),E=a();l((()=>{I(),O()}));let q=0;const z=e=>{switch(q++,q){case 1:j.value=e.fullDate;break;case 2:E.value=e.fullDate,E.value<j.value&&(j.value=e.fullDate,E.value=void 0,q=1);break;default:j.value=e.fullDate,E.value=void 0,q=1}F.value.map((e=>{e.selected=!1,e.fullDate>=j.value&&e.fullDate<=E.value&&(e.selected=!0)}))},B=()=>{b.value=Y.value,M.value=S.value,I()};t((()=>{b.value!==Y.value||M.value!==S.value?L.value=!0:L.value=!1}));const G=()=>{b.value--,-1===b.value&&(M.value--,b.value=11),I()},H=()=>{b.value++,12===b.value&&(M.value++,b.value=0),I()},I=()=>{if(!M.value){const e=new Date;M.value=e.getFullYear(),b.value=e.getMonth()}J(),K(),N(),F.value=Array().concat(x.value,T.value,A.value)},J=()=>{const e=new Date(M.value,b.value+1,0).getDate();T.value=Array.from({length:e},((e,a)=>({isCurrentMonth:!0,day:a+1,isToday:(new Date).toLocaleDateString()===new Date(M.value,b.value,a+1).toLocaleDateString(),fullDate:new Date(M.value,b.value,a+1)})))},K=()=>{const e=new Date(M.value,b.value,0).getDate(),a=new Date(M.value,b.value,1).getDay();x.value=Array.from({length:a%7},((a,l)=>e-l)).reverse().map((e=>({isCurrentMonth:!1,day:e,isToday:!1,fullDate:new Date(M.value,b.value-1,e)})))},N=()=>{const e=x.value.length+T.value.length,a=e-35>0?42-e:35-e;A.value=Array.from({length:a},((e,a)=>a+1)).map((e=>({isCurrentMonth:!1,day:e,isToday:!1,fullDate:new Date(M.value,b.value+1,e)})))},O=()=>{const e=new Date;return S.value=e.getFullYear(),Y.value=e.getMonth(),_.value=e.getDate(),e.toLocaleDateString()};return(e,a)=>(u(),v("div",f,[s("div",y,[s("div",g,[s("div",h,n(c(M))+"年"+n(c(b)+1)+"月 ",1),s("div",{class:"calendar-header-right"},[s("button",{class:"prev",onClick:G},"上一月"),s("button",{class:"next",onClick:H},"下一月")])]),s("div",w,[s("div",m,[(u(),v(r,null,o(p,(e=>s("div",{class:"week-cell",key:e},n(e),1))),64))]),s("div",k,[(u(!0),v(r,null,o(c(F),((e,a)=>(u(),v("div",{class:D(["date-cell",{today:e.isToday,currentMonth:!e.isCurrentMonth,selected:c(j)===e.fullDate||c(E)===e.fullDate||e.selected}]),key:a,onClick:a=>z(e)},n(e.day),11,C)))),128))])])]),s("div",null,[d(s("div",{class:"toToday",onClick:B}," 今 ",512),[[i,c(L)]])])]))}});export{p as default};
